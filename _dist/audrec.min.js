!function(e,t){var s,o,r={};String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),function(e){var s="utilities.js";function o(e){throw"string"==typeof e.thrower&&"string"==typeof e.message&&"string"==typeof e.file?"\nThrower: "+e.thrower+"\nFile: .\\_src\\"+e.file+"\nMessage: "+e.message:"Thrower: throwError( error )\nFile: .\\_src\\"+s+"\nMessage: Invalid error argument."}e.utils={},e.utils.throwError=o,e.utils.isFirefox=function(){return navigator.userAgent.includes("Firefox")},e.utils.isChrome=function(){return navigator.userAgent.includes("Chrome")},e.utils.timeToMilliseconds=function(e){var n=0;return/^([0-9]{1,2}\:?){1,3}$/.test(e)?e.split(":",3).reverse().forEach(function(e,t){var r=parseInt(e);t<2&&r<60&&(n+=1e3*r*Math.pow(60,t)),2===t&&r<24&&(n+=1e3*r*Math.pow(60,t))}):o({thrower:"timeToMilliseconds( str )",file:s,message:'Invalid argument, "str" must have a time format hh:mm:ss (ex: "1:53:40").'}),n},e.utils.millisecondsToTime=function(e,t){var r=e.toString(),n=new Date,i=[];return"boolean"!=typeof(t=t||!1)&&o({thrower:thrower,file:s,message:'Invalid argument, "minutes_only" must be a boolean.'}),/[0-9]+/.test(e)?(n.setHours(0,0,0,0),n.setMilliseconds(e),!1===t&&i.push(n.getHours().toString().padStart(2,"0")),i.push(n.getMinutes().toString().padStart(2,"0")),i.push(n.getSeconds().toString().padStart(2,"0")),r=i.join(":")):o({thrower:thrower,file:s,message:'Invalid argument, "milliseconds" must be an integer.'}),r}}(r),function(u){var l="timer.ctor.js";function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);var n;r=r||50,t=parseInt(t)||42e4,n="Timer( callback, max_duration, interval  )","function"!=typeof e&&u.utils.throwError({thrower:n,file:l,message:'The parameter "callback" must be a function.'}),9<typeof t&&u.utils.throwError({thrower:n,file:l,message:'The parameter "max_duration" must be an integer greater than 9.'}),r<=typeof t&&u.utils.throwError({thrower:n,file:l,message:'The parameter "max_duration" must be an integer greater than or equal to '+r+"."});var i,s,o=c.STATUS.INACTIVE,a=function(){Date.now()-s<t?e(Date.now()-s,t-(Date.now()-s),100*(Date.now()-s)/t):(e(t,0,100),this.stop())}.bind(this);this.start=function(){o===c.STATUS.INACTIVE&&(s=Date.now(),o=c.STATUS.ACTIVE,a(),i=setInterval(a,r))},this.pause=function(){o===c.STATUS.ACTIVE&&(o=c.STATUS.PAUSED,clearInterval(i),a(),s=Date.now()-s)},this.resume=function(){o===c.STATUS.PAUSED&&(o=c.STATUS.ACTIVE,s=Date.now()-s,i=setInterval(a,r),a())},this.stop=function(){o!==c.STATUS.INACTIVE&&(o=c.STATUS.INACTIVE,clearInterval(i),Date.now()-s<t&&a())},this.getStatus=function(){return o}}c.STATUS={INACTIVE:"INACTIVE",PAUSED:"PAUSED",ACTIVE:"ACTIVE"},u.Timer=c}(r),function(w){var E="audrec.ctor.js";function v(e){if(!(this instanceof v))return new v(e);e=e||{};var n,t,i,r,s,o=this,a=v.STATUS.INACTIVE,u={audio:!0},l=e.max_duration||"15:00",c=!1,T=[],f=navigator.mediaDevices,m=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,h=!1,g=new w.Pubsub(["start","recording","pause","resume","stop","microphoneAvailable","microphoneDismissed","error"]);function S(){return n||(a=v.STATUS.INACTIVE,f.getUserMedia?f.getUserMedia(u).then(p,A):m(u,p,A)),this}function d(){return a!==v.STATUS.INACTIVE&&o.stop(),n&&(n.stream.getTracks().forEach(function(e){e.stop()}),T=[],n=null,g.trigger("microphoneDismissed",null,o)),this}function p(e){n=new MediaRecorder(e),g.trigger("microphoneAvailable",[e],o),c&&o.start(),n.ondataavailable=function(e){T.push(e.data)},n.onstart=function(){a=v.STATUS.RECORDING,t.start()},n.onresume=function(){a=v.STATUS.RECORDING,t.resume(),g.trigger("resume",null,o)},n.onpause=function(){a=v.STATUS.PAUSED,t.pause(),g.trigger("pause",null,o)},n.onstop=function(){var e=new Blob(T,{type:i}),t=window.URL.createObjectURL(e),r=new Audio(t);r.currentTime=Number.MAX_VALUE,r.onseeked=function(){r.onseeked=null,r.currentTime=0},a=v.STATUS.INACTIVE,c=!1,T=[],g.trigger("stop",[r,t,e],o)}}function A(e){var t={name:e.name,message:e.message};t.message||"PermissionDeniedError"!==t.name||(t.message="The access to microphone has been denied."),g.trigger("error",[t],o)}i=e.format||v.FORMATS.MP3,function(){var e,t=!1;for(e in v.FORMATS)if(v.FORMATS.hasOwnProperty(e)&&v.FORMATS[e]===i){t=!0;break}!1===t&&w.utils.throwError({thrower:"Audrec( settings )",file:E,message:'The argument "settings.format" must contain an Audrec.FORMATS value.'})}(),l=w.utils.timeToMilliseconds(l),t=new w.Timer(function(e,t,r){g.trigger("recording",[e,t,r],o),w.utils.isFirefox()&&(h||a!==v.STATUS.PAUSED||(h=!0,n.onpause()),h&&a===v.STATUS.RECORDING&&(h=!1,n.onresume()))}.bind(o),l),o.start=function(){return a=v.STATUS.RECORDING,c||(c=!0),n&&n.state===v.STATUS.INACTIVE&&(a=v.STATUS.RECORDING,g.trigger("start",null,o),n.start(),r=Date.now(),s=setTimeout(function(){n.state===v.STATUS.RECORDING&&n.stop()},l-(Date.now()-r)+450)),this},o.stop=function(){return n&&n.state!==v.STATUS.INACTIVE&&(a=v.STATUS.INACTIVE,h=!1,n.stop(),clearTimeout(s),t.stop()),this},o.pause=function(){return n&&n.state===v.STATUS.RECORDING&&(a=v.STATUS.PAUSED,r=Date.now()-r,clearTimeout(s),n.pause()),this},o.resume=function(){return n&&n.state===v.STATUS.PAUSED&&(a=v.STATUS.RECORDING,n.resume(),w.utils.isFirefox()&&t.resume(),r=Date.now()-r,s=setTimeout(function(){n.state===v.STATUS.RECORDING&&n.stop()},l-(Date.now()-r)+400)),this},o.requestMicrophone=S,o.requestMic=S,o.dismissMicrophone=d,o.dismissMic=d,o.getStatus=function(){return a},o.on=g.on,o.off=g.off}v.STATUS={INACTIVE:"inactive",RECORDING:"recording",PAUSED:"paused"},v.FORMATS={MP3:"audio/mpeg",AAC:"audio/aac",MIDI:"audio/midi",OGG:"audio/ogg",WAV:"audio/x-wav",WEBM:"audio/webm","3GP":"audio/3gpp","3G2":"audio/3gpp2"},w.Audrec=v}(r),o="pubsub.ctor.js",(s=r).Pubsub=function e(t){if(!(this instanceof e))return new e(t);var r,i={};r="Pubsub( event_types )",t instanceof Array?t.forEach(function(e){"string"==typeof e?i[e]=[]:s.utils.throwError({thrower:r,file:o,message:'Invalid event type, the "event_types" items must be strings.'})}):s.utils.throwError({thrower:r,file:o,message:'Invalid argument, "event_types" must be an array of event types.'}),this.on=function(e,t){var r="Pubsub#on( type, eventHandler )";e||s.utils.throwError({thrower:r,file:o,message:'The "type" argument is required.'}),e=e.toString(),i[e]instanceof Array?"function"==typeof t?i[e].push(t):s.utils.throwError({thrower:r,file:o,message:'Invalid argument, "eventHandler" must be a function.'}):s.utils.throwError({thrower:r,file:o,message:'The event type "'+e+'" does not exist.'})},this.off=function(e,t){var r,n="Pubsub#off( type, eventHandler )";e||s.utils.throwError({thrower:n,file:o,message:'The "type" argument is required.'}),e=e.toString(),i[e]instanceof Array?t?"function"==typeof t?0<=(r=i[e].indexOf(i))?i[e].splice(r,1):s.utils.throwError({thrower:n,file:o,message:'The specified event handler "eventHandler" does not exist.'}):s.utils.throwError({thrower:n,file:o,message:'Invalid argument, "eventHandler" must be a function.'}):i[e]=[]:s.utils.throwError({thrower:n,file:o,message:'The event type "'+e.toString()+'" does not exist.'})},this.trigger=function(e,t,r){var n="Pubsub#trigger( type, args, this_value )";r=r||null,e||s.utils.throwError({thrower:n,file:o,message:'The "type" argument is required.'}),e=e.toString(),t=t||[],i[e]instanceof Array?t?t instanceof Array?i[e].forEach(function(e){e.apply(r,t)}):s.utils.throwError({thrower:n,file:o,message:'Invalid argument, "args" must be an array.'}):i[e].forEach(function(e){e()}):s.utils.throwError({thrower:n,file:o,message:'The event type "'+e+'" does not exist.'})}},e.Audrec=r.Audrec,e.Audrec.millisecondsToTime=r.utils.millisecondsToTime,e.Audrec.timeToMilliseconds=r.utils.timeToMilliseconds}(this);